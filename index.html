<!DOCTYPE HTML>
<html lang="en-us">
 <head>
  <title>

  </title>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Bootstrap -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <link rel="stylesheet" href="assets/css/style.css"> -->

      <!-- ================================================================ -->
        <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.5.7/firebase.js"></script>
    <!-- ================================================================ -->
    <style>
      html,body{
      text-align: center;
      }

      #playerOne{
        float:left;
        background-color:#1f3053;
        color:white;
        border-right: 1px solid white;
      }
      #playerTwo{
          float:left;
          background-color:#1f3053;
          color:white;
          height: 500px;
      }

      .playerBox{

        background-color:black;
        height: 85%;
      }

      .enterGameButton{
           height: 120px;
           width: 200px;
            position:relative;
            margin-top: 150px;

      }


    </style>


  </head>

    <body>

  <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4">Rock Paper Scissors</h1>
          <p class="lead">This is a modified version of the Rock,Paper,Scissors Game to include Firebase!</p>
        </div>
  </div>
  <!-- ============   Player Boxes   ==================== -->
  <div class="row">

    <div class="col-6 " id="playerOne">
      <h1 class="display-4">Player One</h1>
          <div class="playerBox">

            <button class="btn-primary enterGameButton" id="pOneButton">Click to Join</button>
          </div>
    </div>
  <!-- ============Player Boxes==================== -->
    <div class="col-6 " id="playerTwo">
      <h1 class="display-4">Player Two</h1>
          <div class="playerBox">

              <button class="btn-primary enterGameButton" id="pTwoButton">Click to Join</button>
          </div>
    </div>


  </div>


  <!-- ============Firebase Authentication==================== -->

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAq-2e_HExZ9tmixdKwAjK2AD4l-H98T-o",
    authDomain: "rock-paper-scissors-6da24.firebaseapp.com",
    databaseURL: "https://rock-paper-scissors-6da24.firebaseio.com",
    projectId: "rock-paper-scissors-6da24",
    storageBucket: "rock-paper-scissors-6da24.appspot.com",
    messagingSenderId: "416436021142"
  };
  firebase.initializeApp(config);

  var database = firebase.database();



      $("#pOneButton").on("click",function(event){

        event.preventDefault();

     console.log("hello");

     database.ref().update({
    //
      PlayerOne: {
      Wins: 0,
      Losses : 0,
      Draws : 0,
     pOnechoice: ""}

     });

     database.ref().on("child_added", function(snapshot) { // shows latest child added in the console
         // storing the snapshot.val() in a variable for convenience
         var snap = snapshot.val();

         $("#playerOne").empty();
         $("#playerOne").html('Name: ' + snap.name + '<br />' +
                              'Wins: ' + snap.Wins + '<br />' +
                              'Losses: ' + snap.Losses + '<br />' +
                               'Draws: ' + snap.Draws + '<br />'
             );


             $("#playerOne").append(

                     "<button value='Rock' class = 'pOneBtns'>Rock</button>" + "<br />" +
                     "<button value='Paper' class = 'pOneBtns'>Paper</button>" + "<br />" +
                     "<button value='Scissors' class = 'pOneBtns'>Scissors</button>" + "<br />" +
                     "<button value='submit' class = 'pOneBtns'>Submit</button>"
                 );



   //

   //
   //       // Handle the errors
       }, function(errorObject) {
         // console.log("Errors handled: " + errorObject.code);
       });


});


      $("#pTwoButton").on("click",function(event){

        event.preventDefault();

     console.log("hello");

     database.ref().update({
    //
      PlayerTwo: {
      Wins: 0,
      Losses : 0,
      Draws : 0 }

     });

     // ====================
     database.ref().on("child_added", function(snapshot) { // shows latest child added in the console
         // storing the snapshot.val() in a variable for convenience
         var snap = snapshot.val();

         $("#playerTwo").empty();
         $("#playerTwo").html('Name: ' + snap.name + '<br />' +
                              'Wins: ' + snap.Wins + '<br />' +
                              'Losses: ' + snap.Losses + '<br />' +
                               'Draws: ' + snap.Draws + '<br />'
             );


             $("#playerTwo").append(

                     "<button value='Rock' class = 'pTwoBtns'>Rock</button>" + "<br />" +
                     "<button value='Paper' class = 'pTwoBtns'>Paper</button>" + "<br />" +
                     "<button value='Scissors' class = 'pTwoBtns'>Scissors</button>" + "<br />" +
                     "<button value='submit' class = 'pTwoBtns'>Submit</button>"
                 );
         // ====================


   //

   //
   //       // Handle the errors
       }, function(errorObject) {
         // console.log("Errors handled: " + errorObject.code);
       });

               // ====================

});

//
//     // Firebase watcher .on("child_added"



//
//     database.ref().orderByChild("dateAdded").limitToLast(1).on("child-added",function(snapshot){
//
//
//     });
//
$(document).on("click", ".pOneBtns", function() {




      if($(this).val() === "Rock"){
        database.ref().update({
       //
       PlayerOne: {
       Wins: 0,
       Losses : 0,
       Draws : 0,
       pOnechoice: "Rock"}



        });
        console.log('Rock');
      }

      if($(this).val() === "Paper"){
        console.log('Paper');
        database.ref().push({
       //
         pOnechoice: "Paper"

        });
      }

      if($(this).val() === "Scissors"){
        console.log('Scissors');
      }


});

</script>

    </body>

</html>
